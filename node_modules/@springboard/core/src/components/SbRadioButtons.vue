<template>
  <div class="radiofield-container">
    <div
      v-if="label"
      class="sb-form-label radiofield-label"
    >
      {{ label }}
    </div>
    <div
      class="radiofield-buttons"
      :class="{
        'disabled': disabled
      }"
    >
      <div
        v-for="(element, index) in choices"
        :key="index"
      >
        <label class="radiofield-button">
          <span class="sb-form-input radiofield-button-label">{{ element.label }}</span>
          <input
            class="radiofield-button-input"
            type="radio"
            :checked="value === element.value"
            :name="name"
            :value="element.value"
            :disabled="disabled"
            @change="onChange($event.target.value)"
          >
          <span class="radiofield-button-checkmark" />
        </label>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  name: 'SbRadioButtons',
  model: {
    prop: 'value',
    event: 'change'
  },
  props: {
    /**
     * Label
     */
    label: {
      type: String,
      default: ''
    },
    /**
     * Name attribute
     */
    name: {
      type: String,
      default: function () {
        return 'sb-radio-buttons-' + this._uid
      }
    },
    /**
     * Choices list.
     * Elements must have `label` and `value` attibutes.
     */
    choices: {
      type: Array,
      required: true
    },
    /**
     * Selected value
     * @model
     */
    value: {
      type: [String, Number, Boolean],
      default: undefined
    },
    /**
     * Disabled attribute
     */
    disabled: {
      type: Boolean,
      default: false
    }
  },
  methods: {
    onChange (value) {
      /**
       * Selected element `value`
       *
       * @event change
       * @type {string|number|boolean}
       */
      this.$emit('change', value)
    }
  }
}
</script>

<style lang="less" scoped>
  @import "../less/variables";

  .radiofield-container {
    width: 100%;
    padding: 10px;
    font-family: RobotoCondensed;

    .radiofield-label {
      margin-bottom: 10px;
    }

    .radiofield-buttons {
      display: flex;
      flex-direction: row;
      justify-content: space-around;
      padding: 5px 0;

      .radiofield-button {
        display: flex;
        flex-direction: row;
        align-items: center;
        margin: 0;

        .radiofield-button-input {
          display: none;

          /* When the radio button is checked, add a blue border */
          &:checked ~ .radiofield-button-checkmark {
            border-color: @sb-blue;

            /* Show the indicator (dot/circle) when checked */
            &:after {
              display: block;
            }
          }
        }

        .radiofield-button-label {
          order: 2;
          margin-left: 10px;
          color: @sb-grey-dark;
        }

        .radiofield-button-checkmark {
          position: relative;
          order: 1;
          height: 20px;
          width: 20px;
          background-color: @sb-white;
          border-radius: 50%;
          border: 1px solid @sb-grey;

          &:after {
            display: none;
            content: "";
            position: absolute;
            top: 4px;
            right: 4px;
            bottom: 4px;
            left: 4px;
            border-radius: 50%;
            background-color: @sb-blue;
          }
        }
      }

      &.disabled {
        .radiofield-button-input:checked ~ .radiofield-button-checkmark {
          border-color: @sb-grey;

          &:after {
            background-color: @sb-grey;
          }
        }

        .radiofield-button-label {
          color: @sb-grey;
        }
      }
    }
  }
</style>
