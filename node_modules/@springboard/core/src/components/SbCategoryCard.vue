<template>
  <article class="card-category__container">
    <component
      :is="tagHtml.container"
      :href="url"
      class="card-category"
      :style="`background-image: url('${ image }')`"
    >
      <div
        class="overlay"
        :style="cssColor"
      />
      <component
        :is="tagHtml.title"
        class="card-category__title"
      >
        {{ title }}
      </component>
    </component>
  </article>
</template>

<script>
export default {
  name: 'SbCategoryCard',
  props: {
    /**
     * Titre inside card
     */
    title: {
      type: String,
      required: true
    },
    /**
     * Change **title** html tag or **container** tag
     */
    tag: {
      type: Object,
      default: () => ({
        title: 'h3',
        container: 'a'
      })
    },
    /**
     * url when click on card
     */
    url: {
      type: String,
      default: null
    },
    /**
     * Image inside card
     */
    image: {
      type: String,
      required: true
    },
    /**
     * color on card
     */
    color: {
      type: [String, Array],
      default: '#000000'
    }
  },
  computed: {
    cssColor () {
      let color = this.color

      if (typeof (color) !== 'string') {
        return `background-image: linear-gradient(45deg, ${color[0]} 0%, ${color[1]} 100%);`
      }

      return `background-color: ${color};`
    },
    tagHtml () {
      return {
        title: this.tag.title || 'h3',
        container: this.tag.container || 'a'
      }
    }
  }
}
</script>

<style lang="less" scoped>
@import "../less/variables";

.card-category {
  width              : 100%;
  height             : 165px;
  display            : block;
  display            : flex;
  align-items        : center;
  position           : relative;
  border-radius      : @sb-radius;
  text-decoration    : none;
  background-size    : cover;
  background-position: center;
  box-shadow         : @box-shadow-3;
  justify-content    : center;
  overflow           : hidden;

  &__container {
    width         : 255px;
    position      : relative;
    display       : inline-block;
    vertical-align: top;
  }

  &__title {
    position      : relative;
    z-index       : 1;
    margin        : 0;
    font-size     : 42px;
    font-family   : "RobotoCondensed";
    font-weight   : bold;
    color         : #FEFEFE;
    transform     : rotate(-10deg);
    font-style    : italic;
    text-transform: uppercase;
    text-align    : center;

    &:after {
      content     : '';
      width       : 0;
      height      : 0;
      position    : absolute;
      bottom      : -10px;
      left        : 0;
      left        : 50%;
      transform   : translateX(-50%);
      border-style: solid;
      border-width: 8px 40px 0 0;
      border-color: white transparent transparent transparent;
    }
  }
}

.overlay {
  opacity : 0.6;
  width   : 100%;
  height  : 100%;
  position: absolute;
  top     : 0;
  left    : 0;
}
</style>
